<!DOCTYPE html>
<html>
<head>
    <title>Real-Time Voice Translator</title>
</head>
<body>

<h2>ðŸŽ¤ Real-Time Voice Translator</h2>

<button onclick="startRecording()">Start Recording</button>
<button onclick="stopRecording()">Stop</button>

<p id="status"></p>
<audio id="player" controls></audio>

<script>
let recorder;
let audioChunks = [];

async function startRecording() {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    recorder = new MediaRecorder(stream);
    audioChunks = [];

    recorder.ondataavailable = e => audioChunks.push(e.data);

    recorder.onstop = async () => {
        const blob = new Blob(audioChunks, { type: 'audio/wav' });
        document.getElementById("player").src = URL.createObjectURL(blob);
        uploadAudio(blob);
    };

    recorder.start();
    document.getElementById("status").innerText = "Recording...";
}

function stopRecording() {
    recorder.stop();
    document.getElementById("status").innerText = "Uploading...";
}

async function uploadAudio(blob) {
    const formData = new FormData();
    formData.append("file", blob, "voice.wav");

    const response = await fetch("https://YOUR-RENDER-URL/upload", {
        method: "POST",
        body: formData
    });

    const data = await response.json();
    alert("Translated Text: " + data.text);
}
</script>

</body>
</html>
